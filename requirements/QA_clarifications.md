# 開発前 確認・質問事項 (QA_CLARIFICATIONS)

## ステータス凡例

- ⬜ 未回答
- ✅ 回答済み

---

## 1. スコープ・優先度に関する質問

### Q1-1: Phase 1 のスコープについて ✅

Chrome 拡張（Web クリッパー機能）は Phase 1 に含まれていますが、Web アプリ本体と比較して独立性が高い機能です。  
**Phase 1 の初回リリースでは、Web アプリ本体（カード登録・復習・ダッシュボード）を先に完成させ、Chrome 拡張は後から追加する形でよいですか？**

### Q1-2: デッキの CRUD 操作について ✅

ワイヤーフレームに「新規デッキを作成」ボタンやデッキ一覧が存在しますが、機能要件ドキュメントにはデッキの作成・編集・削除に関する明示的な定義がありません。  
**Phase 1 で以下のデッキ操作を実装する想定でよいですか？**

- デッキの作成（名前の設定）
- デッキの編集（名前の変更）
- デッキの削除
- カードはいずれかのデッキに所属する（デッキ未所属のカードは存在しない）

### Q1-3: カードの削除・一覧閲覧について ✅

機能要件にはカードの「登録」と「編集」は記載されていますが、「削除」や「一覧表示・検索」については明示されていません。  
**Phase 1 で以下を実装しますか？**

- カードの削除
- デッキ内のカード一覧表示
- カードの検索機能

---

## 2. 技術的な確認事項

### Q2-1: Next.js のルーティング方式 ✅

Next.js には `App Router`（推奨・最新）と `Pages Router`（従来型）の 2 つがあります。  
**App Router を採用する方針でよいですか？**

### Q2-2: MUI のバージョン ✅

**MUI v6（最新）を採用する方針でよいですか？** それとも安定性重視で MUI v5 を使用しますか？

### Q2-3: 状態管理ライブラリ ✅

Phase 1 はローカル完結型のため、LocalStorage / IndexedDB へのアクセスを管理する仕組みが必要です。  
**状態管理について希望はありますか？**（例: React Context のみ、Zustand、Jotai など）  
特に希望がなければ、軽量な Zustand を提案します。

### Q2-4: Markdown エディタの実装方針 ✅

Markdown エディタについて、以下のどちらを想定していますか？

- **A: リッチテキストエディタ型** — WYSIWYG エディタ（見たまま編集）。ツールバーでボタンを押して装飾する方式。
- **B: プレーンテキスト + プレビュー型** — テキストエリアに Markdown を直接入力し、隣にプレビューを表示する方式。

### Q2-5: テスト方針 ✅

Phase 1 でのテストはどの程度実施しますか？

- **A:** テストなし（スピード優先）
- **B:** コアロジック（SRS アルゴリズム等）のみユニットテスト
- **C:** ユニットテスト＋ E2E テスト（Playwright 等）

---

## 3. 機能仕様の詳細確認

### Q3-1: SRS アルゴリズムの初期値 ✅

SM-2 ベースの簡易アルゴリズムにおいて、**新規カードの初回復習間隔**はどうしますか？  
例:

- 新規カード → 即座に「今日のデッキ」に追加される
- 新規カード → 翌日に初回復習

### Q3-2: 「定着済み」の定義 ✅

ダッシュボードの「カードの定着度」で、カードを「学習中」「定着済み」に分類するとありますが、**「定着済み」の閾値**はどのように定義しますか？  
例: 「次回復習日が 30 日以上先のカード」を定着済みとする、など。

### Q3-3: 連続学習日数（ストリーク）の条件 ✅

「1 日 1 回以上復習セッションを完了した連続日数」とありますが、**「完了」の定義**はどちらですか？

- **A:** その日の「今日のデッキ」を全て復習し終えた場合
- **B:** 1 枚でも復習すれば「完了」とする

### Q3-4: 復習カードの順序 ✅

「今日のデッキ」内のカードの表示順序について指定はありますか？

- **A:** ランダム
- **B:** 難易度順（「難しい」と評価されたカードを優先）
- **C:** 登録順
- **D:** 特にこだわりなし（実装者に委ねる）
  回答:
  A: ランダムを基本とします。これにより、表示順序に依存しない、純粋な記憶度をテストできます。将来的には、ユーザーが他の順序（難易度順など）を選択できるオプション機能を追加することも検討可能です。

---

## 4. データ・運用に関する質問

### Q4-1: データのエクスポート/インポート機能 ✅

Phase 1 はブラウザローカルにデータが保存されるため、ブラウザのキャッシュクリアやデバイス変更でデータが消失するリスクがあります。  
**Phase 1 で JSON 等によるデータのエクスポート/インポート（バックアップ）機能は必要ですか？**

### Q4-2: 画像の制限事項 ✅

画像アップロードについて、以下の制限は必要ですか？

- 1 枚あたりの最大ファイルサイズ（例: 5MB）
- アップロード前の画像圧縮/リサイズ処理
- 対応フォーマット（JPEG, PNG, GIF, WebP のみ、など）

### Q4-3: PWA 対応 ✅

スマートフォンからの利用を考慮して、**PWA（Progressive Web App）対応**は Phase 1 で行いますか？  
PWA 化すると、ホーム画面への追加やオフライン対応が可能になります。

---

## 回答欄

Q1-1: Phase 1 のスコープについて

回答:
後からの実装で構いません。

Q1-2: デッキの CRUD 操作について

回答:
その想定で正しいです。

デッキの作成（名前の設定）

デッキの編集（名前の変更）

デッキの削除

カードはいずれかのデッキに所属し、デッキ未所属のカードは存在しない

Q1-3: カードの削除・一覧閲覧について

回答:
実装します。

カードの削除

デッキ内のカード一覧表示

カードの検索機能

Q2-1: Next.js のルーティング方式

回答:
App Router を採用する方針でお願いします。

Q2-2: MUI のバージョン

回答:
安定版でお願いします。

Q2-3: 状態管理ライブラリ

回答:
Zustand でも構いませんが、Node のバージョンで最新だと整合性が合わないのでその点注意してください。

Q2-4: Markdown エディタの実装方針

回答:
B（プレーンテキスト + プレビュー型）でお願いします。

Q2-5: テスト方針

回答:
A でいきましょう。
複雑なロジックは極力さけ、一週間後にソースを見ても理解できるレベルで。

Q3-1: SRS アルゴリズムの初期値

回答:
新規カードは作成後、即座に学習セッションを開始できます。
その初回学習時のユーザー評価（例：「難しい」「普通」「簡単」）に応じて、最初の復習間隔を動的に決定します。
例として、「難しい」なら 10 分後、「普通」なら翌日、「簡単」なら 3 日後といった形でスケジュールを記録し、通常の復習サイクルに乗せます。

Q3-2: 「定着済み」の定義

回答:
代表的な SRS アプリ「Anki」の実績を参考に、「次回の復習間隔が 21 日以上先のカード」を「定着済み」と定義します。

Q3-3: 連続学習日数（ストリーク）の条件

回答:
B: 1 枚でも復習すれば「完了」とします。
学習の習慣化を促すため、完璧さよりも継続のしやすさを重視します。

Q3-4: 復習カードの順序

回答:
A: ランダムを基本とします。
表示順序に依存しない、純粋な記憶度をテストするためです。

Q4-1: データのエクスポート/インポート機能

回答:
はい、必要です。ただし、機能は最小限に絞ります。

エクスポート:
全ての学習データを単一の JSON ファイルとしてダウンロードする機能。

インポート:
JSON ファイルをアップロードし、現在の学習データと完全に置き換える機能。
（データの追加・マージ機能は Phase 1 では実装しません）

Q4-2: 画像の制限事項

回答:
はい、必要です。すべてブラウザ側（フロントエンド）で完結させます。

1 枚あたりの最大ファイルサイズ: 3MB

アップロード前の画像圧縮/リサイズ処理: 行わない

対応フォーマット: JPEG, PNG, GIF, WebP のみ

Q4-3: PWA 対応

回答:
完成後に対応します。

> 上記の質問に対する回答をここに記載してください。
> 例: Q1-1: Web アプリ本体を先に完成させる方針で OK。Chrome 拡張は後から追加。
