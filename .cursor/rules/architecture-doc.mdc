---
description: ARCHITECTURE.md の同期ルール。コード変更時にアーキテクチャドキュメントの更新が必要かを判断し、必要なら更新する
alwaysApply: true
---

# ARCHITECTURE.md 同期ルール

プロジェクトルートの `ARCHITECTURE.md` は、人間が保守・引き継ぎするための設計ドキュメントである。

## 更新が必要なケース

以下のいずれかに該当する変更を行った場合、`ARCHITECTURE.md` を更新すること:

- ファイルやディレクトリの追加・削除・移動
- API エンドポイントの追加・変更・削除
- データモデル（`prisma/schema.prisma` や `types/index.ts`）の変更
- 新しいライブラリの追加や既存ライブラリの削除
- 状態管理（Zustand ストア）の構造変更
- SRS アルゴリズムのパラメータや計算式の変更
- データの流れや保存先の変更（SQLite / IndexedDB の役割変更）
- 設計上の重要な判断の追加

## 更新時のルール

- `ARCHITECTURE.md` の末尾「変更履歴」セクションに日付と変更内容を追記する
- 該当するセクションのみ更新し、無関係な部分は触らない
- 「コードの説明」ではなく「人が引き継ぐための理解」の観点で書く
- 推測や曖昧な記述は避け、コードの実態に基づいて正確に記載する

## 更新が不要なケース

- UI の見た目だけの調整（色・余白・フォントサイズ等）
- コメントの追加・修正のみ
- リファクタリングで外部インターフェースが変わらない場合
- バグ修正で設計や構造に変更がない場合
